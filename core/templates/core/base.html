{% load static %}
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Smart Health</title>
    <meta name="csrf-token" content="{{ csrf_token }}">

    <!-- ðŸŒŸ Font Awesome -->
    <script src="https://kit.fontawesome.com/a076d05399.js" crossorigin="anonymous"></script>

    <!-- ðŸŽ¨ Inject styles -->
    <script>
        document.addEventListener("DOMContentLoaded", function() {
            const style = document.createElement("style");
            style.innerHTML = `
                body {
                    margin: 0;
                    font-family: 'Segoe UI', sans-serif;
                    background: linear-gradient(to right, #e0f7fa, #f1f8e9);
                    background-attachment: fixed;
                    color: #333;
                }
                nav {
                    background-color: #ffffffcc;
                    box-shadow: 0 2px 4px rgba(0,0,0,0.1);
                    padding: 10px 20px;
                }
                nav ul {
                    list-style: none;
                    display: flex;
                    gap: 20px;
                    margin: 0;
                    padding: 0;
                    align-items: center;
                }
                nav li a {
                    text-decoration: none;
                    color: #00796b;
                    font-weight: 600;
                    font-size: 16px;
                    transition: color 0.3s;
                }
                nav li a:hover {
                    color: #004d40;
                    text-decoration: underline;
                }
                nav li a i {
                    margin-right: 6px;
                }
                main {
                    padding: 25px;
                    animation: fadeIn 0.4s ease-in-out;
                }
                @keyframes fadeIn {
                    from { opacity: 0; transform: translateY(10px); }
                    to { opacity: 1; transform: translateY(0); }
                }
                .back-button {
                    position: fixed;
                    top: 80px;
                    left: 20px;
                    background-color: #00796b;
                    color: white;
                    padding: 10px 16px;
                    border: none;
                    border-radius: 8px;
                    cursor: pointer;
                    font-size: 14px;
                    font-weight: 600;
                    font-family: 'Segoe UI', sans-serif;
                    box-shadow: 0 4px 8px rgba(0,0,0,0.2);
                    transition: background-color 0.3s ease, transform 0.2s ease;
                    z-index: 999;
                    display: flex;
                    align-items: center;
                    gap: 6px;
                    text-decoration: none;
                }
                .back-button:hover {
                    background-color: #004d40;
                    transform: translateX(-2px);
                }
                .back-button:active {
                    transform: translateX(0);
                }
                .back-button i {
                    font-size: 16px;
                }
            `;
            document.head.appendChild(style);
        });
    </script>
</head>

<body>

    {% if user.is_authenticated and not hide_nav %}
    <nav>
        <ul>

            {% if user.role == 'patient' %}
                <li><a href="{% url 'patient_home' %}"><i class="fas fa-home"></i> Home</a></li>
                <li><a href="{% url 'visit_details' %}"><i class="fas fa-notes-medical"></i> Details</a></li>
                <li><a href="{% url 'message_box' %}"><i class="fas fa-comments"></i> Messages</a></li>
                <li><a href="{% url 'patient_profile' %}"><i class="fas fa-user"></i> Profile</a></li>

            {% elif user.role == 'doctor' %}
                <li><a href="{% url 'doctor_dashboard' %}"><i class="fas fa-home"></i> Home</a></li>
                <li><a href="{% url 'message_box' %}"><i class="fas fa-comments"></i> Messages</a></li>
                <li><a href="{% url 'doctor_profile' %}"><i class="fas fa-user-md"></i> Profile</a></li>

            {% elif user.role == 'therapist' %}
                <li><a href="{% url 'therapist_dashboard' %}"><i class="fas fa-home"></i> Home</a></li>
                <li><a href="{% url 'message_box' %}"><i class="fas fa-comments"></i> Messages</a></li>
                <li><a href="{% url 'therapist_profile' %}"><i class="fas fa-user-nurse"></i> Profile</a></li>

            {% endif %}

        </ul>
    </nav>
    {% endif %}

    <!-- Back Button -->
    {% if not hide_nav %}
    <button onclick="goBack()" class="back-button" title="Go back">
        <i class="fas fa-arrow-left"></i> Back
    </button>
    {% endif %}
    
    <script>
        function goBack() {
            if (window.history.length > 1) {
                window.history.back();
            } else {
                {% if user.is_authenticated %}
                    {% if user.role == 'patient' %}
                        window.location.href = "{% url 'patient_home' %}";
                    {% elif user.role == 'doctor' %}
                        window.location.href = "{% url 'doctor_dashboard' %}";
                    {% elif user.role == 'therapist' %}
                        window.location.href = "{% url 'therapist_dashboard' %}";
                    {% endif %}
                {% else %}
                    window.location.href = "{% url 'register' %}";
                {% endif %}
            }
        }
    </script>

    <main>
        {% block content %}
        {% endblock %}
    </main>

</body>
</html>
